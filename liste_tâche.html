<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>To-do</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
</head>
<body>
    <div class="theme-switch" onclick="toggleTheme()">
        <i class="fas fa-moon"></i>
    </div>

    <!-- Modal de suppression -->
    <div class="modal-overlay" id="deleteModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-icon delete">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h3 class="modal-title">Confirmer la suppression</h3>
            </div>
            <p class="modal-text" id="deleteModalMessage">Êtes-vous sûr de vouloir supprimer cette tâche ? Cette action est irréversible.</p>
            <div class="modal-actions">
                <button class="modal-btn modal-btn-cancel" onclick="closeModal('delete')">Annuler</button>
                <button class="modal-btn modal-btn-delete" onclick="confirmDelete()">Supprimer</button>
            </div>
        </div>
    </div>

    <!-- Modal d'édition -->
    <div class="modal-overlay" id="editModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-icon edit">
                    <i class="fas fa-edit"></i>
                </div>
                <h3 class="modal-title">Modifier la tâche</h3>
            </div>
            <div class="modal-form">
                <input type="text" id="editTaskTitle" class="modal-input" placeholder="Titre de la tâche">
                <select id="editPrioritySelect" class="modal-select">
                    <option value="low">Basse Priorité</option>
                    <option value="medium">Moyenne</option>
                    <option value="high">Haute Priorité</option>
                </select>
            </div>
            <div class="modal-actions">
                <button class="modal-btn modal-btn-cancel" onclick="closeModal('edit')">Annuler</button>
                <button class="modal-btn modal-btn-confirm" onclick="saveEdit()">Enregistrer</button>
            </div>
        </div>
    </div>

    <div class="app-card">
        <header class="header">
            <div class="header-info">
                <h1>Mes Tâches</h1>
                <p id="dateDisplay" style="color: var(--text-muted); font-size: 0.85rem;"></p>
            </div>
            <div class="progress-container">
                <svg width="80" height="80" class="progress-circle">
                    <circle cx="40" cy="40" r="35" fill="transparent" stroke="rgba(0,0,0,0.1)" stroke-width="4"/>
                    <circle id="progressPath" cx="40" cy="40" r="35" fill="transparent" stroke="var(--primary)" stroke-width="4" stroke-dasharray="220" stroke-dashoffset="220" stroke-linecap="round"/>
                </svg>
                <div class="progress-text">
                    <div id="progressPercent" class="progress-percent">0%</div>
                    <div id="progressStats" class="progress-stats">0/0 tâches</div>
                </div>
            </div>
        </header>

        <!-- Section des statistiques détaillées -->
        <div class="stats-container">
            <div class="stat-item">
                <span id="totalTasks" class="stat-number">0</span>
                <span class="stat-label">Total</span>
            </div>
            <div class="stat-item">
                <span id="completedTasks" class="stat-number">0</span>
                <span class="stat-label">Terminées</span>
            </div>
            <div class="stat-item">
                <span id="pendingTasks" class="stat-number">0</span>
                <span class="stat-label">En attente</span>
            </div>
        </div>

        <div class="input-group">
            <div class="input-wrapper">
                <input type="text" id="taskInput" placeholder="Que devez-vous faire ?">
            </div>
            <div class="controls">
                <select id="prioritySelect">
                    <option value="low">Basse Priorité</option>
                    <option value="medium">Moyenne</option>
                    <option value="high">Haute Priorité</option>
                </select>
                <button class="btn-add" onclick="addTask()">Ajouter</button>
            </div>
        </div>

        <div class="task-list" id="taskList">
            <!-- Les tâches seront insérées ici dynamiquement -->
        </div>
    </div>
</body>
</html>